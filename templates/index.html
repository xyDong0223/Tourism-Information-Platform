<!DOCTYPE html>
<html>
<head>
    <title>Client</title>
    <script src="../../static/js/socket.io.js"></script>
</head>
<body>
    <h1>Client</h1>
    <button id="get_quotation">Get Quotation</button>
    <div id="quotation_price"></div>

    <script>
        var socket = io.connect('http://localhost:5002');

        // Listen for a response from the broker with the price of the quotation
        socket.on('update_price', function(data) {
            var price_div = document.getElementById('quotation_price');
            console.log(data)
            // Update the quotation price on the page
            price_div.innerHTML = 'Price of quotation from ' + data['description'] + ': ' + data['price'];
        });

        // Send a request to the broker for a quotation from the Auldfella's Quotation Service
        document.getElementById('get_quotation').onclick = function() {
            console.log("click the button")
            socket.emit('get_quotation');
            console.log("emit the event")
        };
    </script>
</body>
</html>
